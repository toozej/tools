server {
    listen 8080;
    server_name localhost;

    # Root directory for all locations
    root /usr/share/nginx/html;
    index index.html;

    # Handle the root redirect
    location = / {
        try_files /index.html =404;
    }

    # Handle the md-converter prefix
    location /md-converter/ {
        # Using root instead of alias is often safer
        # This will look for files in /usr/share/nginx/html/md-converter/
        try_files $uri $uri/ /md-converter/index.html;

        # Proper MIME types
        location ~* \.wasm$ {
            add_header Content-Type application/wasm;
        }
        location ~* \.js$ {
            add_header Content-Type application/javascript;
        }
        location ~* \.css$ {
            add_header Content-Type text/css;
        }
    }

    # Specifically for static assets if they are not caught above
    location /md-converter/static/ {
        try_files $uri =404;
    }
}
